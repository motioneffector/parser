<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>@motioneffector/parser - Demo</title>
  <link rel="stylesheet" href="demo-files/styles.css">
</head>
<body>
  <div class="page">
    <header class="header">
      <h1 class="header-title">@motioneffector/parser</h1>
      <p class="header-description">A natural language command parser for text adventures and interactive fiction.</p>
      <nav class="header-links">
        <a href="https://www.npmjs.com/package/@motioneffector/parser" class="header-link" target="_blank">
          ðŸ“¦ npm
        </a>
        <a href="https://github.com/motioneffector/parser" class="header-link" target="_blank">
          ðŸ’» GitHub
        </a>
        <a href="https://github.com/motioneffector/parser/wiki" class="header-link" target="_blank">
          ðŸ“– Manual
        </a>
      </nav>
    </header>

    <main class="exhibits">
      <!-- Exhibit 1: Command Anatomy -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Command Anatomy</h2>
          <p class="exhibit-description">Watch the parser break down commands into tokens and build structured command objects.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="exhibit-1">
            <div class="command-input-wrapper">
              <span style="color: var(--text-muted); font-family: var(--font-mono);">&gt;</span>
              <input type="text" class="command-input" id="command-input" placeholder="Type a command..." value="get the brass lamp">
            </div>

            <div class="try-buttons" id="try-buttons">
              <span style="font-size: var(--font-size-xs); color: var(--text-muted); margin-right: var(--space-sm);">TRY:</span>
              <button class="try-btn" data-cmd="get the brass lamp">get the brass lamp</button>
              <button class="try-btn" data-cmd="look">look</button>
              <button class="try-btn" data-cmd="go north">go north</button>
              <button class="try-btn" data-cmd="put key in chest">put key in chest</button>
              <button class="try-btn" data-cmd="exa lamp">exa lamp</button>
              <button class="try-btn" data-cmd="dance">dance</button>
              <button class="try-btn" data-cmd="get ball">get ball</button>
              <button class="try-btn" data-cmd="say hello world">say hello world</button>
            </div>

            <div class="sentence-breakdown">
              <div class="sentence-breakdown-title">Sentence Breakdown</div>
              <div class="tokens-container" id="tokens-container"></div>
            </div>

            <div class="assembled-command">
              <div class="assembled-command-title">Assembled Command</div>
              <div class="command-cards" id="command-cards"></div>
              <div class="pattern-indicator" id="pattern-indicator"></div>
            </div>

            <div class="color-legend">
              <div class="legend-item"><div class="legend-color verb"></div> Verb</div>
              <div class="legend-item"><div class="legend-color noun"></div> Noun</div>
              <div class="legend-item"><div class="legend-color adjective"></div> Adjective</div>
              <div class="legend-item"><div class="legend-color preposition"></div> Preposition</div>
              <div class="legend-item"><div class="legend-color article"></div> Article (stripped)</div>
            </div>
          </div>
        </div>
      </section>

      <!-- Exhibit 2: Adventure Room -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Adventure Room</h2>
          <p class="exhibit-description">Interact with a mini text adventure to see entity resolution, disambiguation, and pronoun tracking in action.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="exhibit-2">
            <div class="adventure-container">
              <div>
                <div class="room-view">
                  <div class="room-header">
                    <span class="room-name" id="room-name">Living Room</span>
                    <div class="room-exits" id="room-exits">
                      <span class="exit-badge">N</span>
                    </div>
                  </div>
                  <div class="room-items" id="room-items"></div>
                </div>

                <div class="adventure-input-area">
                  <div class="adventure-try-buttons">
                    <span style="font-size: var(--font-size-xs); color: var(--text-muted);">TRY:</span>
                    <button class="try-btn adventure-try" data-cmd="get lamp">get lamp</button>
                    <button class="try-btn adventure-try" data-cmd="examine it">examine it</button>
                    <button class="try-btn adventure-try" data-cmd="get ball">get ball</button>
                    <button class="try-btn adventure-try" data-cmd="drop it">drop it</button>
                    <button class="try-btn adventure-try" data-cmd="north">north</button>
                  </div>
                  <input type="text" class="input adventure-input input-mono" id="adventure-input" placeholder="Enter command...">
                </div>
              </div>

              <div class="adventure-sidebar">
                <div class="inventory-panel">
                  <div class="panel-title">ðŸŽ’ Inventory</div>
                  <div class="inventory-grid" id="inventory-grid">
                    <div class="inventory-slot">empty</div>
                    <div class="inventory-slot">empty</div>
                    <div class="inventory-slot">empty</div>
                    <div class="inventory-slot">empty</div>
                  </div>
                </div>

                <div class="pronoun-panel">
                  <div class="panel-title">"IT" refers to:</div>
                  <div class="pronoun-display" id="pronoun-display">
                    <span class="pronoun-text">(nothing)</span>
                  </div>
                </div>

                <div class="narrative-panel">
                  <div class="panel-title">ðŸ“œ Narrative</div>
                  <div class="narrative-output" id="narrative-output">
                    <p>You are in the <span class="highlight">Living Room</span>.</p>
                    <p>You see a brass lamp, a wooden chest, a red ball, a blue ball, and a rusty key.</p>
                    <p>There is an exit to the <span class="highlight">NORTH</span>.</p>
                    <p style="color: var(--accent-blue);">ðŸ’¡ Click a suggested command above to get started!</p>
                  </div>
                </div>

                <button class="btn btn-secondary" id="reset-room">Reset Room</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Exhibit 3: Vocabulary Workshop -->
      <section class="exhibit">
        <div class="exhibit-header">
          <h2 class="exhibit-title">Vocabulary Workshop</h2>
          <p class="exhibit-description">Browse the default vocabulary and add custom verbs and directions that work in the demos above.</p>
        </div>
        <div class="exhibit-content">
          <div class="exhibit-interactive" id="exhibit-3">
            <div class="vocab-container">
              <div>
                <div class="vocab-panel">
                  <div class="panel-title">Default Verbs (27)</div>
                  <div class="vocab-list" id="default-verbs"></div>
                </div>
                <div class="vocab-panel mt-md">
                  <div class="panel-title">Default Directions (12)</div>
                  <div class="vocab-list" id="default-directions"></div>
                </div>
              </div>

              <div>
                <div class="vocab-panel">
                  <div class="panel-title">Your Custom Verbs</div>
                  <div class="vocab-list" id="custom-verbs">
                    <div style="padding: var(--space-md); color: var(--text-muted); font-size: var(--font-size-sm);">
                      No custom verbs yet. Add one below!
                    </div>
                  </div>
                </div>
                <div class="vocab-panel mt-md">
                  <div class="panel-title">Your Custom Directions</div>
                  <div class="vocab-list" id="custom-directions">
                    <div style="padding: var(--space-md); color: var(--text-muted); font-size: var(--font-size-sm);">
                      No custom directions yet.
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="add-vocab-form">
              <div class="form-title">Add Custom Verb</div>
              <div class="form-row">
                <label class="form-label">Canonical:</label>
                <input type="text" class="input form-input input-mono" id="verb-canonical" placeholder="CAST" style="text-transform: uppercase;">
              </div>
              <div class="form-row">
                <label class="form-label">Synonyms:</label>
                <input type="text" class="input form-input input-mono" id="verb-synonyms" placeholder="cast, invoke, conjure">
              </div>
              <div class="form-row">
                <label class="form-label">Pattern:</label>
                <select class="input form-input" id="verb-pattern">
                  <option value="none">none - No arguments (look, quit)</option>
                  <option value="subject" selected>subject - One entity (get lamp)</option>
                  <option value="subject_object">subject_object - Two entities (put key in chest)</option>
                  <option value="direction">direction - A direction (go north)</option>
                  <option value="text">text - Free text (say hello)</option>
                </select>
              </div>
              <div class="pattern-preview" id="pattern-preview">
                <div class="pattern-diagram">
                  <span>Pattern:</span>
                  <div class="pattern-circle filled">V</div>
                  <div class="pattern-line"></div>
                  <div class="pattern-circle">S</div>
                </div>
                <div class="mt-sm" style="color: var(--text-muted);">
                  Example: "cast fireball" â†’ CAST [fireball]
                </div>
              </div>
              <button class="btn btn-primary mt-md" id="add-verb-btn">Add to Parser</button>
            </div>

            <div class="hint-box">
              <span>ðŸ’¡</span>
              After adding a verb, try it in the Command Anatomy exhibit above! Type "cast fireball" to see it work.
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="test-runner">
      <div class="test-runner-header">
        <h2 class="test-runner-title">Test Suite</h2>
        <div class="test-runner-actions">
          <button class="btn btn-primary" id="run-tests">Run All Tests</button>
          <button class="btn btn-secondary" id="run-fuzz">Run Fuzz Tests</button>
          <button class="btn btn-secondary" id="reset-page">Reset Page</button>
        </div>
      </div>
      <div class="test-runner-content">
        <div class="test-progress">
          <div class="test-progress-bar">
            <div class="test-progress-fill" id="progress-fill"></div>
          </div>
          <div class="test-progress-text" id="progress-text">Ready to run tests</div>
        </div>
        <div class="test-output" id="test-output">
          <div class="test-output-empty">Click "Run All Tests" to execute the test suite</div>
        </div>
        <div class="test-summary hidden" id="test-summary">
          <div class="test-summary-item passed">
            <span>âœ“</span>
            <span id="passed-count">0</span> passed
          </div>
          <div class="test-summary-item failed">
            <span>âœ—</span>
            <span id="failed-count">0</span> failed
          </div>
          <div class="test-summary-item skipped">
            <span>â—‹</span>
            <span id="skipped-count">0</span> skipped
          </div>
        </div>
      </div>
    </footer>
  </div>

  <script type="module" src="demo-files/script.js"></script>
</body>
</html>
